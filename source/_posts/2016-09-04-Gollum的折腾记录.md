title: Gollum的折腾记录
date: 2016-09-04 17:30:04
tags:
categories:
 软件笔记

---

# 前言
最近好久都没有更新博客了，除了懒之外，还有一个原因是最近早起去上班实在是有些力不从心啊……员工的岗前培训内容还是蛮多的，所以我打算试试早就想用的 local wikipedia 来当知识笔记了。

借着小伙伴[@Acuario](https://yhyy135.github.io/)的一篇博文，我也要紧跟大神的「[Git 简明教程](https://yhyy135.github.io/2016/08/28/how-to-use-git/)」脚步来一篇教程。

这次先试用了一下 Gollum ，我看网络上好像没太多介绍，那么我就顺便写个安装介绍咯。

<!-- more -->

# Gollum 是什么？
Gollum简单来说就是一个基于 git 的 wiki 系统。同时一个 Gollum Wiki也是一个简易的 git 仓库：

- 一个 Gollum 仓库的内容都是可以人工编辑的，仓库是空的话则无法人工编辑。页面都拥有一个唯一的文件名字，并且你可以用任意方式整合在文件夹中。其他内容（例如：图片、PDF 和 页面的header/footers ）也能显示在页面中。

-  Gollum 页面有以下特点
    - 可以使用多种的 [markups](https://github.com/gollum/gollum#markups)；
    - 能够用任意的编辑器或者 IDE 编辑，并且也可以使用网页交互页面编辑（例如 http://localhost:4567 ）；
    - 能以所有版本显示（commits）。

另外 Gollum 支持的系统有 Unix/Linux-like 和 Windows。

# 如何安装 Gollum
## 我的系统环境是：
- Windows 10 build 1607；
- 需要安装[JRE](http://download.oracle.com/otn-pub/java/jdk/8u101-b13/jre-8u101-windows-x64.exe?AuthParam=1472555907_456de1a2f23e739852c4d8606187435c
)；
- 需要安装[JRuby 9.1.2.0 Windows Executable (x64)](https://s3.amazonaws.com/jruby.org/downloads/9.1.2.0/jruby_windows_x64_9_1_2_0.exe)。

> 注意：   Windows 支持还在开发当中！许多东西不会正常运行, 也有许多测试是没有通过的. 这里请了解你所面临的风险。   
ps：也就是有些功能不太正常而已:P

## 使用gem命令安装

完成上面的环境配置后，以管理员权限运行Powershell并输入：

`gem install gollum`


出现下图所示信息，就代表已经安装成功了：   
{% asset_img P1.png Powershell信息 %}

# 简单使用 gollum
## 快速开始
gollum的使用很简单：
1. 打开 powershell 或者其他随便什么命令行工具；
2. 使用`cd`命令定位到你需要建立wiki的文件夹（例如D:\Users\Usersname\Documents\GitHub\MyWiKi）；
3. 输入`gollum`；
4. 在浏览器中打开http://localhost:4567 。

这些步骤将会开启网页服务器（WEBrick），并在网页交互页面上运行Gollum，之后就可以在里面查看和编辑 wiki 词条了。

## gollum 网页交互页面介绍

- 以下是网页home页面的示范：

{% asset_img P3.png home页面 %}

---

- 使用`New`新建一个词条时，可以使用`/`来建立相应的文件夹层次结构：

{% asset_img P7.png 新建页面 %}
> 这里需要注意的是，文件名字不支持中文，如果键入中文名字的话，会自动把中文转换为拼音型式，但wiki的内容是支持中文显示的。具体如下图中所示：

{% asset_img P8.png 词条页面 %}

---

- 进入相应词条页面后：

{% asset_img P6.png 词条页面 %}

---

- `Edit`可以用来编辑当前wiki页面：

{% asset_img P2.png 编辑页面 %}

---

- `File`可以显示当前wiki文件夹下面的文件结构：

{% asset_img P4.png 文件夹结构 %}

---

- `history`可以显示当前wiki页面的编辑历史（git既视感出现！）：

{% asset_img P5.png 文件夹结构 %}

---

## 使用命令行方式
关于下表中的注意事项和配置文件请移步[CONFIGURATION](https://github.com/gollum/gollum/blob/master/README.md#configuration)

| 命令选项            | 参数 | 描述 |
| ----------------- | --------- | ----------- |
| --host            | [HOST]    | Specify the hostname or IP address to listen on. Default: `0.0.0.0`.<sup>1</sup> |
| --port            | [PORT]    | Specify the port to bind Gollum with. Default: `4567`. |
| --config          | [FILE]  | Specify path to Gollum's configuration file. |
| --ref             | [REF]     | Specify the git branch to serve. Default: `master`. |
| --adapter         | [ADAPTER] | Launch Gollum using a specific git adapter. Default: `grit`.<sup>2</sup> |
| --bare            | none      | Tell Gollum that the git repository should be treated as bare. This is only necessary when using the default grit adapter. |
| --base-path       | [PATH]    | Specify the leading portion of all Gollum URLs (path info). Setting this to `/wiki` will make the wiki accessible under `http://localhost:4567/wiki/`. Default: `/`. |
| --page-file-dir   | [PATH]    | Specify the subdirectory for all pages. If set, Gollum will only serve pages from this directory and its subdirectories. Default: repository root. |
| --css             | none      | Tell Gollum to inject custom CSS into each page. Uses `custom.css` from repository root.<sup>3,5</sup> |
| --js              | none      | Tell Gollum to inject custom JS into each page. Uses `custom.js` from repository root.<sup>3,5</sup> |
| --emoji           | none      | Parse and interpret emoji tags (e.g. :heart:). |
| --no-edit         | none      | Disable the feature of editing pages. |
| --live-preview    | none      | Enable the live preview feature in page editor. |
| --no-live-preview | none      | Disable the live preview feature in page editor. |
| --allow-uploads   | [MODE]    | Enable file uploads. If set to `dir`, Gollum will store all uploads in the `/uploads/` directory in repository root. If set to `page`, Gollum will store each upload at the currently edited page.<sup>4</sup> |
| --mathjax         | none      | Enables MathJax (renders mathematical equations). By default, uses the `TeX-AMS-MML_HTMLorMML` config with the `autoload-all` extension.<sup>5</sup> |
| --irb             | none      | Launch Gollum in "console mode", with a [predefined API](https://github.com/gollum/gollum-lib/). |
| --h1-title        | none      | Tell Gollum to use the first `<h1>` as page title. |
| --show-all        | none      | Tell Gollum to also show files in the file view. By default, only valid pages are shown. |
| --collapse-tree   | none      | Tell Gollum to collapse the file tree, when the file view is opened. By default, the tree is expanded. |
| --user-icons      | [MODE]    | Tell Gollum to use specific user icons for history view. Can be set to `gravatar`, `identicon` or `none`. Default: `none`. |
| --mathjax-config  | [FILE]    | Specify path to a custom MathJax configuration. If not specified, uses the `mathjax.config.js` file from repository root. |
| --template-dir    | [PATH]    | Specify custom mustache template directory. |
| --help            | none      | Display the list of options on the command line. |
| --version         | none      | Display the current version of Gollum. |

# 暂未解决的问题
1. 文件名无法显示为中文，不过通过使用`gollum --h1-title `可以用标记为`h1`格式的文字作为该词条的标题。
2. 不知道为何无法进行认证登录，每个创建的页面下面作者均为（原谅我是个彩笔，请大家提示）。

# 参考资料
1. [Gollum Github Repositories](https://github.com/gollum/gollum)
2. [Gollum Wiki](https://github.com/gollum/gollum/wiki)
3. [Gollum Installation for Windows](https://github.com/gollum/gollum/wiki/Installation#windows)
4. [Support Windows via JRuby - Meta Issue #1044](https://github.com/gollum/gollum/issues/1044#issuecomment-126784479)
